# ?? ??
spring.application.name=bigProject
spring.profiles.active=oauth

# ===============================
# ACA Proxy Header Support
# ===============================
server.forward-headers-strategy=native

# 도메인이 다른 프론트-백엔드 환경에서 세션 유지를 위한 설정
server.servlet.session.cookie.same-site=none
server.servlet.session.cookie.secure=true

spring.datasource.hikari.connection-timeout=10000
spring.datasource.hikari.maximum-pool-size=10

# ===============================
# Logging (Security Debug)
# ===============================
# JWT 필터 디버그
logging.level.com.aivle0102.bigproject.security=DEBUG
# Spring Security의 모든 결정 과정을 보여줘!
logging.level.org.springframework.security=DEBUG
# 웹 요청이 어디서 막히는지 보여줘!
logging.level.org.springframework.web=DEBUG
# Hibernate 쿼리 파라미터까지 다 보여줘!
logging.level.org.hibernate.type.descriptor.sql=TRACE

# ===============================
# PostgreSQL DataSource
# ===============================
# ACA 환경을 위하여 환경변수 설정 변경
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/bigproject}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:}
spring.datasource.driver-class-name=org.postgresql.Driver

# ===============================
# JPA ??
# ===============================
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.open-in-view=false

spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.servlet.encoding.charset=UTF-8
spring.servlet.encoding.enabled=true
spring.servlet.encoding.force=true
spring.sql.init.mode=always

# OpenAI
openai.base-url=https://api.openai.com/v1
openai.api-key=${OPENAI_API_KEY:dummy-openai-key}
openai.model=gpt-4.1-mini
openai.image-model=gpt-image-1

ai.gradio.base-url=http://localhost:7860

# SerpApi
serpapi.base-url=https://serpapi.com
serpapi.api-key=${SERPAPI_API_KEY:dummy-serpapi-key}

# JWT
jwt.secret=${JWT_SECRET:ZGV2ZWxvcG1lbnQtc2VjcmV0LWtleS1mb3ItbG9jYWwtdGVzdGluZy1vbmx5LTMyYnl0ZXM=}
jwt.expiration=86400000

# OAuth2 redirect (used by success/failure handlers)
app.oauth2.redirect-uri=${OAUTH2_REDIRECT_URI:https://bp-frontend-app.wittysand-a0f4e87e.centralindia.azurecontainerapps.io/oauth/callback}
app.oauth2.enabled=true

# HACCP OpenAPI
haccp.service-key=${HACCP_SERVICE_KEY:dummy-haccp-key}

# allergen json path
allergen.catalog-path=classpath:data/allergen.json

# ===============================
# Mail (SMTP)
# ===============================
# Gmail (uses app password)
mail.gmail.host=smtp.gmail.com
mail.gmail.port=587
mail.gmail.username=${MAIL_USERNAME:dummy-gmail-user}
mail.gmail.password=${MAIL_PASSWORD:dummy-gmail-pass}
mail.gmail.smtp.auth=true
mail.gmail.smtp.starttls.enable=true
mail.gmail.smtp.starttls.required=true
mail.gmail.default-encoding=UTF-8

# Naver
mail.naver.host=smtp.naver.com
mail.naver.port=587
mail.naver.username=${NAVER_MAIL_USERNAME:dummy-naver-user}
mail.naver.password=${NAVER_MAIL_PASSWORD:dummy-naver-pass}
mail.naver.smtp.auth=true
mail.naver.smtp.starttls.enable=true
mail.naver.smtp.starttls.required=true
mail.naver.default-encoding=UTF-8

# Analysis Engine
analysis.engine.url=${ANALYSIS_ENGINE_URL:http://localhost:8000}
